<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì „ë‘ì‹¤í–‰ 2ë²ˆ - ì„  ë°©í–¥ ë§¤ì¹­ ê²Œì„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .game-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 1000px;
            width: 100%;
        }
        
        .instruction {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 30px;
            padding: 15px 30px;
            border-radius: 15px;
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            color: white;
        }
        
        .timer {
            font-size: 20px;
            font-weight: bold;
            color: #ff4757;
            margin-bottom: 20px;
        }
        
        .game-area {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 40px 0;
            gap: 30px;
        }
        
        .side-area {
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 200px;
        }
        
        .card {
            width: 150px;
            height: 150px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 3px solid #ddd;
            border-radius: 15px;
            background: #f9f9f9;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .card:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            border-color: #FF6B6B;
        }
        
        .card.selected {
            border-color: #FF6B6B;
            background: #ffe8e8;
            box-shadow: 0 0 20px rgba(255, 107, 107, 0.3);
        }
        
        .center-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        
        .center-card {
            width: 200px;
            height: 200px;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 4px solid #2196F3;
            border-radius: 15px;
            background: #e3f2fd;
            font-size: 18px;
            font-weight: bold;
            color: #1976D2;
        }
        
        .card-stack {
            font-size: 16px;
            color: #666;
            margin-top: 10px;
        }
        
        .line-pattern {
            width: 80px;
            height: 80px;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .line {
            position: absolute;
            stroke-width: 4;
            fill: none;
            stroke-linecap: round;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin: 30px 0;
            font-size: 18px;
        }
        
        .stat-item {
            padding: 10px 20px;
            background: #f0f0f0;
            border-radius: 10px;
            font-weight: bold;
        }
        
        .feedback {
            font-size: 18px;
            font-weight: bold;
            margin: 20px 0;
            padding: 15px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        
        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .start-screen {
            text-align: center;
        }
        
        .start-button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 20px;
            border-radius: 10px;
            cursor: pointer;
            margin: 20px 10px;
            transition: all 0.3s ease;
        }
        
        .start-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }
        
        .rules-explanation {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: left;
        }
        
        .next-button {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 15px;
            transition: all 0.3s ease;
        }
        
        .next-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div id="startScreen" class="start-screen">
            <h1>ì „ë‘ì‹¤í–‰ 2ë²ˆ - ì„  ë°©í–¥ ë§¤ì¹­ ê²Œì„</h1>
            <div class="rules-explanation">
                <h3>ê²Œì„ ê·œì¹™:</h3>
                <ul>
                    <li>ê°€ìš´ë° ì¹´ë“œì™€ ê°™ì€ ë°©í–¥ì¸ ì¹´ë“œë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”</li>
                    <li>ì„ ì˜ íŒ¨í„´(êµ¬ë¶ˆêµ¬ë¶ˆ, ì ì„ , ì§€ê·¸ì¬ê·¸, ì§ì„ )ì€ ìƒê´€ì—†ì´ ë°©í–¥ë§Œ ê°™ìœ¼ë©´ ë©ë‹ˆë‹¤</li>
                    <li>ë°©í–¥: ì¢ŒëŒ€ê°ì„ (\), ìš°ëŒ€ê°ì„ (/), ê°€ë¡œ(â”€), ì„¸ë¡œ(|)</li>
                    <li>ì¢Œìš°ì— ê°ê° 2ê°œì”© ì¹´ë“œê°€ ì œì‹œë˜ê³ , ê²Œì„ ì¢…ë£Œê¹Œì§€ ìœ ì§€ë©ë‹ˆë‹¤</li>
                    <li>í•œ ì¹´ë“œë‹¹ ì‹œê°„ ì œí•œì€ 5ì´ˆì…ë‹ˆë‹¤</li>
                    <li>ì´ 20ë¬¸ì œê°€ ì¶œì œë©ë‹ˆë‹¤</li>
                </ul>
            </div>
            <button class="start-button" onclick="startGame()">ê²Œì„ ì‹œì‘</button>
        </div>
        
        <div id="gameScreen" style="display: none;">
            <div class="instruction">ê°€ìš´ë° ì¹´ë“œì™€ ê°™ì€ ë°©í–¥ì¸ ì¹´ë“œë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”</div>
            <div class="timer">ë‚¨ì€ ì‹œê°„: <span id="timeLeft">5</span>ì´ˆ</div>
            
            <div class="game-area">
                <div class="side-area">
                    <div class="card" onclick="selectCard(0)">
                        <div id="leftCard1" class="line-pattern"></div>
                    </div>
                    <div class="card" onclick="selectCard(1)">
                        <div id="leftCard2" class="line-pattern"></div>
                    </div>
                </div>
                
                <div class="center-area">
                    <div class="center-card">
                        <div id="centerCard" class="line-pattern"></div>
                    </div>
                    <div class="card-stack">ì¹´ë“œ <span id="currentCard">1</span>/20</div>
                </div>
                
                <div class="side-area">
                    <div class="card" onclick="selectCard(2)">
                        <div id="rightCard1" class="line-pattern"></div>
                    </div>
                    <div class="card" onclick="selectCard(3)">
                        <div id="rightCard2" class="line-pattern"></div>
                    </div>
                </div>
            </div>
            
            <div id="feedback" class="feedback" style="display: none;"></div>
            
            <div class="stats">
                <div class="stat-item">ì ìˆ˜: <span id="score">0</span></div>
                <div class="stat-item">ì •ë‹µ: <span id="correct">0</span></div>
                <div class="stat-item">ì˜¤ë‹µ: <span id="incorrect">0</span></div>
            </div>
            
            <button class="start-button" onclick="showStartScreen()">ì²˜ìŒìœ¼ë¡œ</button>
        </div>
    </div>
    
    <script>
        let gameState = {
            score: 0,
            correct: 0,
            incorrect: 0,
            current: 1,
            total: 20,
            timer: null,
            timeLeft: 5,
            waitingForNext: false,
            correctAnswer: -1,
            centerDirection: '',
            fixedCards: [] // ê³ ì •ëœ ì¢Œìš° ì¹´ë“œë“¤
        };
        
        // ë°©í–¥ê³¼ íŒ¨í„´ ì •ì˜
        const directions = ['leftDiagonal', 'rightDiagonal', 'horizontal', 'vertical'];
        const patterns = ['wavy', 'dotted', 'zigzag', 'straight'];
        const lineColor = '#000000'; // ëª¨ë“  ì„ ì„ ê²€ì •ìƒ‰ìœ¼ë¡œ í†µì¼
        
        function showStartScreen() {
            document.getElementById('startScreen').style.display = 'block';
            document.getElementById('gameScreen').style.display = 'none';
            resetGame();
        }
        
        function startGame() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('gameScreen').style.display = 'block';
            generateFixedCards(); // ê³ ì • ì¹´ë“œ ìƒì„±
            nextRound();
        }
        
        function resetGame() {
            gameState = {
                score: 0,
                correct: 0,
                incorrect: 0,
                current: 1,
                total: 20,
                timer: null,
                timeLeft: 5,
                waitingForNext: false,
                correctAnswer: -1,
                centerDirection: '',
                fixedCards: []
            };
            updateStats();
        }
        
        function generateFixedCards() {
            // 4ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ ë°©í–¥ì„ 4ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ íŒ¨í„´ê³¼ ì¡°í•©
            const shuffledDirections = [...directions].sort(() => Math.random() - 0.5);
            const shuffledPatterns = [...patterns].sort(() => Math.random() - 0.5);
            
            gameState.fixedCards = [];
            for (let i = 0; i < 4; i++) {
                gameState.fixedCards.push({
                    direction: shuffledDirections[i],
                    pattern: shuffledPatterns[i]
                });
            }
            
            // ê³ ì • ì¹´ë“œë“¤ì„ í™”ë©´ì— í‘œì‹œ
            createLinePattern('leftCard1', gameState.fixedCards[0].direction, gameState.fixedCards[0].pattern, lineColor);
            createLinePattern('leftCard2', gameState.fixedCards[1].direction, gameState.fixedCards[1].pattern, lineColor);
            createLinePattern('rightCard1', gameState.fixedCards[2].direction, gameState.fixedCards[2].pattern, lineColor);
            createLinePattern('rightCard2', gameState.fixedCards[3].direction, gameState.fixedCards[3].pattern, lineColor);
        }
        
        function nextRound() {
            if (gameState.current > gameState.total) {
                endGame();
                return;
            }
            
            gameState.waitingForNext = false;
            clearInterval(gameState.timer);
            clearCardSelections();
            
            generateCenterCard();
            findCorrectAnswer();
            startTimer();
            
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('currentCard').textContent = gameState.current;
        }
        
        function generateCenterCard() {
            // ê°€ìš´ë° ì¹´ë“œ ìƒì„± (4ê°œ ë°©í–¥ ì¤‘ í•˜ë‚˜ ì„ íƒ)
            gameState.centerDirection = directions[Math.floor(Math.random() * directions.length)];
            const centerPattern = patterns[Math.floor(Math.random() * patterns.length)];
            
            createLinePattern('centerCard', gameState.centerDirection, centerPattern, lineColor);
        }
        
        function findCorrectAnswer() {
            // ê°€ìš´ë° ì¹´ë“œì™€ ê°™ì€ ë°©í–¥ì¸ ê³ ì • ì¹´ë“œë¥¼ ì°¾ê¸°
            gameState.correctAnswer = -1;
            for (let i = 0; i < gameState.fixedCards.length; i++) {
                if (gameState.fixedCards[i].direction === gameState.centerDirection) {
                    gameState.correctAnswer = i;
                    break;
                }
            }
        }
        
        function createLinePattern(elementId, direction, pattern, color) {
            const element = document.getElementById(elementId);
            element.innerHTML = '';
            
            const svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            svg.setAttribute('width', '80');
            svg.setAttribute('height', '80');
            svg.setAttribute('viewBox', '0 0 80 80');
            
            const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');
            path.setAttribute('stroke', color);
            path.setAttribute('stroke-width', '3');
            path.setAttribute('fill', 'none');
            path.setAttribute('stroke-linecap', 'round');
            
            let pathData = '';
            const startPadding = 10;
            const endPadding = 70;
            
            switch (direction) {
                case 'leftDiagonal': // \
                    pathData = getPatternPath(pattern, startPadding, startPadding, endPadding, endPadding);
                    break;
                case 'rightDiagonal': // /
                    pathData = getPatternPath(pattern, startPadding, endPadding, endPadding, startPadding);
                    break;
                case 'horizontal': // â”€
                    pathData = getPatternPath(pattern, startPadding, 40, endPadding, 40);
                    break;
                case 'vertical': // |
                    pathData = getPatternPath(pattern, 40, startPadding, 40, endPadding);
                    break;
            }
            
            path.setAttribute('d', pathData);
            
            if (pattern === 'dotted') {
                path.setAttribute('stroke-dasharray', '4 4');
            }
            
            svg.appendChild(path);
            element.appendChild(svg);
        }
        
        function getPatternPath(pattern, x1, y1, x2, y2) {
            switch (pattern) {
                case 'straight':
                    return `M ${x1} ${y1} L ${x2} ${y2}`;
                
                case 'wavy':
                    const midX = (x1 + x2) / 2;
                    const midY = (y1 + y2) / 2;
                    const controlOffset = 15;
                    
                    if (x1 === x2) { // ì„¸ë¡œ
                        return `M ${x1} ${y1} Q ${x1 + controlOffset} ${midY - 10} ${midX} ${midY} Q ${x2 - controlOffset} ${midY + 10} ${x2} ${y2}`;
                    } else if (y1 === y2) { // ê°€ë¡œ
                        return `M ${x1} ${y1} Q ${midX - 10} ${y1 + controlOffset} ${midX} ${midY} Q ${midX + 10} ${y2 - controlOffset} ${x2} ${y2}`;
                    } else { // ëŒ€ê°ì„ 
                        return `M ${x1} ${y1} Q ${midX - 10} ${midY - 10} ${midX} ${midY} Q ${midX + 10} ${midY + 10} ${x2} ${y2}`;
                    }
                
                case 'dotted':
                    return `M ${x1} ${y1} L ${x2} ${y2}`;
                
                case 'zigzag':
                    const segments = 3;
                    const stepX = (x2 - x1) / segments;
                    const stepY = (y2 - y1) / segments;
                    const zigzagOffset = 8;
                    
                    let path = `M ${x1} ${y1}`;
                    for (let i = 1; i <= segments; i++) {
                        const currentX = x1 + stepX * i;
                        const currentY = y1 + stepY * i;
                        const offset = (i % 2 === 1) ? zigzagOffset : -zigzagOffset;
                        
                        if (x1 === x2) { // ì„¸ë¡œ
                            path += ` L ${currentX + offset} ${currentY}`;
                        } else if (y1 === y2) { // ê°€ë¡œ
                            path += ` L ${currentX} ${currentY + offset}`;
                        } else { // ëŒ€ê°ì„ 
                            path += ` L ${currentX + offset} ${currentY - offset}`;
                        }
                    }
                    path += ` L ${x2} ${y2}`;
                    return path;
                
                default:
                    return `M ${x1} ${y1} L ${x2} ${y2}`;
            }
        }
        
        function startTimer() {
            gameState.timeLeft = 5;
            document.getElementById('timeLeft').textContent = gameState.timeLeft;
            
            gameState.timer = setInterval(() => {
                gameState.timeLeft--;
                document.getElementById('timeLeft').textContent = gameState.timeLeft;
                
                if (gameState.timeLeft <= 0) {
                    timeUp();
                }
            }, 1000);
        }
        
        function selectCard(cardIndex) {
            if (gameState.waitingForNext) return;
            
            clearInterval(gameState.timer);
            gameState.waitingForNext = true;
            
            // ì¹´ë“œ ì„ íƒ í‘œì‹œ
            clearCardSelections();
            const cards = document.querySelectorAll('.card');
            cards[cardIndex].classList.add('selected');
            
            if (cardIndex === gameState.correctAnswer) {
                showFeedback('ì •ë‹µ! ğŸ‰', 'correct');
                gameState.correct++;
                gameState.score += 10;
            } else {
                const correctDirection = gameState.centerDirection;
                const selectedDirection = gameState.fixedCards[cardIndex].direction;
                
                if (gameState.correctAnswer === -1) {
                    // ì •ë‹µì´ ì—†ëŠ” ê²½ìš°
                    showFeedback(`ì˜¤ë‹µì…ë‹ˆë‹¤. ê°€ìš´ë° ì¹´ë“œì™€ ê°™ì€ ë°©í–¥(${getDirectionName(correctDirection)})ì¸ ì¹´ë“œê°€ ì—†ìŠµë‹ˆë‹¤.`, 'incorrect');
                } else {
                    showFeedback(`ì˜¤ë‹µì…ë‹ˆë‹¤. ì„ íƒí•œ ì¹´ë“œëŠ” ${getDirectionName(selectedDirection)}ì´ì§€ë§Œ, ì •ë‹µì€ ${getDirectionName(correctDirection)} ë°©í–¥ì…ë‹ˆë‹¤.`, 'incorrect');
                }
                gameState.incorrect++;
            }
            
            gameState.current++;
            updateStats();
            
            setTimeout(() => {
                nextRound();
            }, 3000);
        }
        
        function timeUp() {
            clearInterval(gameState.timer);
            gameState.waitingForNext = true;
            
            const correctDirection = gameState.centerDirection;
            
            if (gameState.correctAnswer === -1) {
                showFeedback(`ì‹œê°„ ì´ˆê³¼! ê°€ìš´ë° ì¹´ë“œì™€ ê°™ì€ ë°©í–¥(${getDirectionName(correctDirection)})ì¸ ì¹´ë“œê°€ ì—†ì—ˆìŠµë‹ˆë‹¤. â°`, 'incorrect');
            } else {
                showFeedback(`ì‹œê°„ ì´ˆê³¼! ì •ë‹µì€ ${getDirectionName(correctDirection)} ë°©í–¥ì´ì—ˆìŠµë‹ˆë‹¤. â°`, 'incorrect');
                // ì •ë‹µ ì¹´ë“œ í‘œì‹œ
                const cards = document.querySelectorAll('.card');
                cards[gameState.correctAnswer].classList.add('selected');
            }
            
            gameState.incorrect++;
            gameState.current++;
            updateStats();
            
            setTimeout(() => {
                nextRound();
            }, 3000);
        }
        
        function getDirectionName(direction) {
            const directionNames = {
                leftDiagonal: 'ì¢ŒëŒ€ê°ì„ (\\)',
                rightDiagonal: 'ìš°ëŒ€ê°ì„ (/)',
                horizontal: 'ê°€ë¡œ(â”€)',
                vertical: 'ì„¸ë¡œ(|)'
            };
            return directionNames[direction] || direction;
        }
        
        function clearCardSelections() {
            const cards = document.querySelectorAll('.card');
            cards.forEach(card => card.classList.remove('selected'));
        }
        
        function showFeedback(message, type) {
            const feedback = document.getElementById('feedback');
            feedback.textContent = message;
            feedback.className = `feedback ${type}`;
            feedback.style.display = 'block';
        }
        
        function updateStats() {
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('correct').textContent = gameState.correct;
            document.getElementById('incorrect').textContent = gameState.incorrect;
        }
        
        function endGame() {
            const accuracy = Math.round((gameState.correct / gameState.total) * 100);
            alert(`ê²Œì„ ì¢…ë£Œ!\n\nìµœì¢… ì ìˆ˜: ${gameState.score}ì \nì •í™•ë„: ${accuracy}%\nì •ë‹µ: ${gameState.correct}ê°œ\nì˜¤ë‹µ: ${gameState.incorrect}ê°œ`);
            showStartScreen();
        }
    </script>
</body>
</html>
